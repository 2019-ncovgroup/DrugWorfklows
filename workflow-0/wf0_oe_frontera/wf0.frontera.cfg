
{
    "workload" : {
        "recompute"      : "true",
        # output types: sdf, oeb
        "output"         : "sdf",
        "localf"         : "./",
        "verbose"        : true,
        "timeout"        : 180,

        "use_hybrid"     : true,
        "high_resolution": true,
        "force_flipper"  : false,

        "input_dir"      : "/scratch1/07305/rpilot/merzky/tg803521/covid-19-0/Model-generation/input/",
        "impress_dir"    : "/scratch1/07305/rpilot/merzky/tg803521/covid-19-0/Model-generation/impress_md",
        "oe_license"     : "/scratch1/07305/rpilot/merzky/tg803521/covid-19-0/DrugWorfklows/workflow-0/oe_license.txt"
    },


    "cpn"       :  30,
    "gpn"       :   0,

    # numbers should be powers of two
    "n_masters" :   1,

    "master"    : "wf0_master.py",
    "worker"    : "wf0_worker.py",

    "pilot_descr"  : {
        "resource"     : "tacc.frontera_wf0",
        "project"      : "MCB20024",
        "staging_input": ["oe_license.txt"],
        "access_schema": "ssh", 
        "exit_on_error": false
    },

    "master_descr" : {
        "executable"   : "python3",
      # "tags"         : {"location": "new_node"},
        "pre_exec"     : [

                          "export OE_LICENSE=./oe_license.txt",

                          "module load   TACC",
                          "module unload intel",
                          "module unload impi",
                          "module load   intel",
                          "module load   python3/3.7.0",

                       ## "module reset",
                       ## ". $RP_PILOT_SANDBOX/deactivate",
                       ## "module load TACC",
                       ## "module unload intel",
                       ## "module unload impi",
                       ## "module load   intel",
                       ## "module load   impi",
                       ## "module unload python3",
                          "source /home1/07305/rpilot/.miniconda3/etc/profile.d/conda.sh",
                          "conda activate /scratch1/07305/rpilot/radical.pilot.sandbox/ve_wf0_ad",
                        # "which conda",
                        # "which python",
                        # "which python3",
                        # "env | sort > e1",
                        # "python3 -V",
                        # "which radical-stack",
                        # "echo '-------------'",

                          "export PATH=$PATH:/scratch1/07305/rpilot/radical.pilot.sandbox/ve_wf0_ad/bin/",
                          "unset PYTHONHOME",

                        # "which conda",
                        # "which python",
                        # "which python3",
                        # "env | sort > e1",
                        # "python3 -V",
                        # "which radical-stack",
                          "radical-stack"
                         ]
    },

    "worker_descr" : {
        "executable"   : "python3",
        "pre_exec"     : [
                          "export OE_LICENSE=./oe_license.txt",

                          "module load TACC",
                          "module unload intel",
                          "module unload impi",
                          "module load   intel",
                          "module load   python3/3.7.0",

                          "source /home1/07305/rpilot/.miniconda3/etc/profile.d/conda.sh",
                          "conda activate /scratch1/07305/rpilot/radical.pilot.sandbox/ve_wf0_ad",

                          "export PATH=$PATH:/scratch1/07305/rpilot/radical.pilot.sandbox/ve_wf0_ad/bin/",
                          "unset PYTHONHOME",

						  "radical-stack",
						  "hostname",
						# "ulimit -u 16384",
						  "ulimit -a"
						# "i=0; while test $i -lt 1024; do sleep 100 & i=$((i+1)); done; ps -ef | grep sleep"
                         ]
    }
}

